import{d as g,an as _,ao as k,r as B,ak as D,aq as M,F as V,c as y,e as C,N as I,i as n,f as N,I as T}from"./IEdULTv5.js";import{u as c}from"./D8BqwcMy.js";const x={class:"group/nui-file-headless relative"},P=["id","multiple"],R=g({inheritAttrs:!1,__name:"BaseInputFileHeadless",props:_({id:{default:void 0},multiple:{type:Boolean,default:!1},filterFileDropped:{type:Function,default:()=>!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(m,{expose:F}){const o=m,[l]=k(m,"modelValue"),e=B(),r=D(()=>o.id),v=new WeakMap;function u(){e.value?.click()}function d(a){a.stopPropagation(),a.preventDefault();const s=a.dataTransfer,i=new DataTransfer;if(e.value&&s){for(const t of s.files)o.filterFileDropped(t)&&i.items.add(t);e.value.files=i.files,l.value=e.value.files}}function p(a){if(!a||!l.value||!e.value)return;const s=new DataTransfer;v.has(a)&&v.delete(a);for(const i of l.value)i!==a&&s.items.add(i);e.value.files=s.files,l.value=e.value.files}function w(a){const s=a.target.files;if(s)if(o.multiple&&l.value){const i=[...l.value],t=new DataTransfer;for(const f of i)t.items.add(f);for(const f of s)i.some(h=>h.name===f.name)||t.items.add(f);if(!e.value)return;e.value.files=t.files,l.value=t.files}else l.value=s}return M("BaseInputFileHeadlessContext",V({el:e,id:r,files:l,open:u,remove:p,preview:c,drop:d})),F({el:e,id:r,files:l,open:u,remove:p,preview:c,drop:d}),(a,s)=>(y(),C("div",x,[I(a.$slots,"default",{id:n(r),el:n(e),files:n(l),open:u,remove:p,preview:n(c),drop:d}),N("input",T({id:n(r),ref_key:"inputRef",ref:e,type:"file"},a.$attrs,{class:"hidden",multiple:o.multiple,onChange:w}),null,16,P)]))}});export{R as _};
