import{d as re,al as M,x as fe,z as _,bd as Y,c as u,e as f,i as e,O as k,w as v,g as c,X as b,U as y,f as $,a5 as ye,aD as ve,N as g,_ as ne,l as be,E as ge,an as ee,ao as _e,H as te,r as O,be as he,aq as ke,F as we,s as le,J as w,K as B,h as R,C as q,R as W,S as oe,W as Be,ai as $e,ap as Ie}from"./IEdULTv5.js";import{_ as Ce}from"./BEFkdUEj.js";import{_ as Ae}from"./Ddq59R0r.js";import{M as Ve,t as ze,n as Fe}from"./CT3I3ucC.js";import{e as ae,o as qe,t as je,l as xe,a as se,Z as Me}from"./87QLUwCG.js";const Le=["innerHTML"],De=["innerHTML"],He=re({__name:"BaseAutocompleteItem",props:{item:{default:void 0},selectedIcon:{default:"lucide:check"},active:{type:Boolean},selected:{type:Boolean},mark:{default:"nui-mark"},rounded:{default:void 0},properties:{default:()=>({label:"label",sublabel:"sublabel",media:"media",icon:"icon"})}},setup(L){const o=L,D=M(o,"BaseAutocompleteItem","rounded"),t={none:"",sm:"rounded-md",md:"rounded-lg",lg:"rounded-xl",full:"rounded-xl"},S=fe("BaseAutocompleteContext",{query:""}),s=_(()=>{if(!(o.item==null||o.properties==null)){if(typeof o.properties.label=="string")return o.item[o.properties.label];if(typeof o.properties.label=="function")return o.properties.label(o.item)}}),I=_(()=>{if(!(o.item==null||o.properties==null)){if(typeof o.properties.sublabel=="string")return o.item[o.properties.sublabel];if(typeof o.properties.sublabel=="function")return o.properties.sublabel(o.item)}}),C=_(()=>{if(!(o.item==null||o.properties==null)){if(typeof o.properties.media=="string")return o.item[o.properties.media];if(typeof o.properties.media=="function")return o.properties.media(o.item)}}),A=_(()=>{if(!(o.item==null||o.properties==null)){if(typeof o.properties.icon=="string")return o.item[o.properties.icon];if(typeof o.properties.icon=="function")return o.properties.icon(o.item)}}),V=_(()=>S.query),j=_(()=>o.mark),T=Y(()=>s.value,V,j),E=Y(()=>I.value,V,j);return(H,z)=>{const m=Ce,i=ne,N=Ae,p=be,x=ge;return u(),f("div",{class:b(["flex cursor-pointer items-center p-2 transition-colors duration-300",[o.active?"bg-muted-100 dark:bg-muted-700":"",e(D)&&t[e(D)]]])},[e(C)&&!e(A)?(u(),k(m,{key:0,src:e(C),size:"xs",class:"me-3"},null,8,["src"])):e(A)&&!e(C)?(u(),k(N,{key:1,size:"sm",rounded:"sm",color:"none",class:"me-1"},{default:v(()=>[c(i,{name:e(A),class:b(["size-4",[o.selected?"text-primary-500":"text-muted-500"]])},null,8,["name","class"])]),_:1})):y("",!0),$("div",null,[c(p,{as:"h4",weight:o.selected?"semibold":"normal",size:"sm",class:"text-muted-800 dark:text-white"},{default:v(()=>[$("span",{innerHTML:e(T)},null,8,Le)]),_:1},8,["weight"]),e(I)?(u(),k(x,{key:0,size:"xs",class:"text-muted-400"},{default:v(()=>[$("span",{innerHTML:e(E)},null,8,De)]),_:1})):y("",!0)]),ye($("div",{class:b(["ms-auto flex items-center justify-center",[e(C)&&"size-8",e(A)&&"size-8"]])},[g(H.$slots,"selected-icon",{},()=>[c(i,{name:H.selectedIcon,class:"text-success-500 block size-4"},null,8,["name"])])],2),[[ve,o.selected]])],2)}}}),Ne={key:1,class:"nui-autocomplete-multiple"},Pe={key:0,class:"nui-autocomplete-multiple-list"},Re={class:"nui-autocomplete-multiple-list-item"},Se=["onClick"],Te={class:"nui-autocomplete-outer"},Ee={key:1,class:"nui-autocomplete-icon"},Ke={key:4,class:"nui-autocomplete-placeload"},Ue={key:0,class:"nui-autocomplete-results-placeholder"},Ze={class:"nui-autocomplete-results-placeholder-text text-sm"},Je={key:1,class:"nui-autocomplete-results-placeholder"},Oe={class:"nui-autocomplete-results-placeholder-text text-sm"},We={key:0,class:"nui-autocomplete-results-header"},Xe={key:2,class:"nui-autocomplete-results-footer"},lt=re({__name:"BaseAutocomplete",props:ee({items:{default:()=>[]},label:{default:""},labelFloat:{type:Boolean},icon:{default:void 0},placeholder:{default:""},error:{type:[String,Boolean],default:""},clearValue:{default:void 0},clearIcon:{default:"lucide:x"},chipClearIcon:{default:"lucide:x"},dropdownIcon:{default:"lucide:chevron-down"},displayValue:{type:Function,default:void 0},filterDebounce:{default:0},filterItems:{type:Function,default:void 0},allowCreate:{type:Boolean,default:!1},hideCreatePrompt:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},colorFocus:{type:Boolean,default:!1},dropdown:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},placement:{default:"bottom-start"},properties:{default:void 0},contrast:{default:void 0},i18n:{default:void 0},rounded:{default:void 0},size:{default:void 0},classes:{default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:ee(["keydown"],["update:modelValue"]),setup(L,{expose:o,emit:D}){const t=L,S=D,[s,I]=_e(L,"modelValue",{set(l){if(!t.multiple&&I.prop&&t.properties?.value){const a=t.properties.value;return t.items.find(r=>r&&typeof r=="object"&&a in r&&r[a]===l)?.[a]}return l},get(l){if(!t.multiple&&I.prop&&t.properties?.value){const a=t.properties.value;return t.items.find(r=>r&&typeof r=="object"&&a in r&&r[a]===l)}return l}}),C=M(t,"BaseAutocomplete","contrast"),A=M(t,"BaseAutocomplete","i18n"),V=M(t,"BaseAutocomplete","rounded"),j=M(t,"BaseAutocomplete","size"),T=l=>{if(I.prop&&t.properties?.value){const a=t.properties.value,r=m.value.find(d=>d&&typeof d=="object"&&a in d&&d[a]===l);if(typeof r=="object"&&r&&t.properties.label&&t.properties.label in r)return r[t.properties.label]}return l==null||typeof l=="string"?l:typeof l=="object"&&t.properties?.label&&t.properties.label in l?l[t.properties.label]:l},E=(l,a)=>{if(!l||!a)return a??[];const r=l.toLowerCase();return a.filter(d=>{if(typeof d=="string")return d?.toLowerCase().includes(r);if(typeof d=="object"&&t.properties?.label&&t.properties.label in d)return d[t.properties.label].toLowerCase().includes(r);if(typeof d=="object"&&t.properties?.sublabel&&t.properties.sublabel in d)return d[t.properties.sublabel].toLowerCase().includes(r)})},H=_(()=>t.filterItems===void 0?E:t.filterItems),z=_(()=>t.displayValue===void 0?T:t.displayValue),m=te(t.items),i=O(""),N=he(i,t.filterDebounce),p=te(t.dropdown?t.items:[]),x=O(!1),ue=_(()=>i.value!==N.value),h=_(()=>x.value||ue.value),X=_(()=>i.value===""?null:i.value),ie={none:"",sm:"nui-autocomplete-rounded-sm",md:"nui-autocomplete-rounded-md",lg:"nui-autocomplete-rounded-lg",full:"nui-autocomplete-rounded-full"},pe={sm:"nui-autocomplete-sm",md:"nui-autocomplete-md",lg:"nui-autocomplete-lg"},de={default:"nui-autocomplete-default","default-contrast":"nui-autocomplete-default-contrast",muted:"nui-autocomplete-muted","muted-contrast":"nui-autocomplete-muted-contrast"};ke("BaseAutocompleteContext",we({selected:s,items:m,filteredItems:p,query:i,pending:h,clear:U,removeItem:P})),o({selected:s,filteredItems:p,query:i,pending:h,clear:U,removeItem:P}),le([N,m],async([l,a])=>{x.value=!0;try{p.value=await H.value(l,a)}catch(r){if(r?.name==="AbortError")return;throw r}finally{x.value=!1}}),le(()=>t.items,()=>{m.value=t.items});const K=_(()=>t.clearable?Array.isArray(s.value)?s.value.length>0:s.value!==t.clearValue:!1);function U(){s.value=t.clearValue??(t.multiple?[]:null)}const Z=_(()=>s.value&&typeof s.value=="object"&&!Array.isArray(s.value)&&"icon"in s.value&&typeof s.value.icon=="string"?s.value.icon:t.icon);function P(l){if(!Array.isArray(s.value)){s.value=t.clearValue;return}for(let a=s.value.length-1;a>=0;--a)t.properties?.value,s.value[a]===l&&s.value.splice(a,1)}function ce(l){return t.properties==null?z.value(l):typeof t.properties.value=="string"?l[t.properties.value]:typeof t.properties.value=="function"?t.properties.value(l):z.value(l)}const J=O(s);return(l,a)=>{const r=ne,d=$e,me=Ie,G=He;return u(),k(e(Me),{modelValue:e(J),"onUpdate:modelValue":a[3]||(a[3]=n=>Be(J)?J.value=n:null),by:e(I).prop&&t.properties?.value?void 0:t.properties?.value,multiple:t.multiple,disabled:t.disabled,class:b(["nui-autocomplete",t.classes?.wrapper,e(j)&&pe[e(j)],e(C)&&de[e(C)],e(V)&&ie[e(V)],t.icon&&"nui-has-icon",t.labelFloat&&"nui-autocomplete-label-float",t.loading&&"nui-autocomplete-loading",t.colorFocus&&"nui-autocomplete-focus",t.error&&"nui-autocomplete-error"]),as:"div"},{default:v(()=>[c(e(Ve),{composable:"",leave:"transition ease-in duration-100","leave-from":"opacity-100","leave-to":"opacity-0",onHide:a[2]||(a[2]=n=>i.value=""),flip:!t.multiple,offset:5,strategy:t.fixed?"fixed":"absolute",placement:t.placement,"adaptive-width":t.fixed,"z-index":200},{default:v(()=>["label"in l.$slots&&!l.labelFloat||t.label&&!t.labelFloat?(u(),k(e(ae),{key:0,class:b(["nui-autocomplete-label",l.classes?.label])},{default:v(()=>[g(l.$slots,"label",w(B({query:e(i),filteredItems:e(p),pending:e(h),items:e(m)})),()=>[R(q(l.label),1)])]),_:3},8,["class"])):y("",!0),t.multiple?(u(),f("div",Ne,[Array.isArray(e(s))&&e(s).length>0?(u(),f("ul",Pe,[(u(!0),f(W,null,oe(e(s),n=>(u(),f("li",{key:String(n)},[g(l.$slots,"autocomplete-multiple-list-item",w(B({item:n,displayValue:e(z)(n),removeItem:P})),()=>[$("div",Re,[R(q(e(z)(n))+" ",1),$("button",{type:"button",onClick:F=>P(n)},[c(r,{name:l.chipClearIcon,class:"nui-autocomplete-multiple-list-item-icon"},null,8,["name"])],8,Se)])])]))),128))])):y("",!0)])):y("",!0),c(e(ze),null,{default:v(()=>[$("div",Te,[c(e(qe),{class:b(["nui-autocomplete-input",[l.classes?.input,t.dropdown&&!e(K)&&"!pe-12",t.dropdown&&e(K)&&"!pe-[4.5rem]"]]),"display-value":t.multiple?void 0:e(z),placeholder:t.placeholder,disabled:t.disabled,onChange:a[0]||(a[0]=n=>i.value=n.target.value),onKeydown:a[1]||(a[1]=n=>S("keydown",n))},null,8,["class","display-value","placeholder","disabled"]),"label"in l.$slots&&t.labelFloat||t.label&&t.labelFloat?(u(),k(e(ae),{key:0,class:b(["nui-label-float",t.classes?.label])},{default:v(()=>[g(l.$slots,"label",w(B({query:e(i),filteredItems:e(p),pending:e(h),items:e(m)})),()=>[R(q(t.label),1)])]),_:3},8,["class"])):y("",!0),e(Z)?(u(),f("div",Ee,[g(l.$slots,"icon",{iconName:e(Z)},()=>[c(r,{name:e(Z),class:"nui-autocomplete-icon-inner"},null,8,["name"])])])):y("",!0),e(K)&&(Array.isArray(e(s))&&e(s)?.length>0||!Array.isArray(e(s))&&e(s)!=null)?(u(),f("button",{key:2,type:"button",tabindex:"-1",class:b(["nui-autocomplete-clear",[t.classes?.icon,t.dropdown&&"me-10"]]),onClick:U},[g(l.$slots,"clear-icon",{},()=>[c(r,{name:t.clearIcon,class:"nui-autocomplete-clear-inner"},null,8,["name"])])],2)):y("",!0),t.dropdown?(u(),k(e(je),{key:3,class:"nui-autocomplete-clear nui-autocomplete-chevron"},{default:v(({open:n})=>[g(l.$slots,"dropdown-icon",{},()=>[c(r,{name:t.dropdownIcon,class:b(["nui-autocomplete-clear-inner transition-transform duration-300",[t.classes?.icon,n&&"rotate-180"]])},null,8,["name","class"])])]),_:3})):y("",!0),t.loading?(u(),f("div",Ke,[c(d,{class:b(["nui-placeload",t.icon&&"ms-6"])},null,8,["class"])])):y("",!0)])]),_:3}),t.error&&typeof t.error=="string"?(u(),k(me,{key:2,color:"danger",class:b(t.classes?.error)},{default:v(()=>[R(q(t.error),1)]),_:1},8,["class"])):y("",!0),c(e(Fe),{class:b(!t.fixed&&"w-full")},{default:v(()=>[c(e(xe),{as:"div",class:b({"nui-autocomplete-results":e(p).length>0||!l.hideCreatePrompt})},{default:v(()=>[e(p).length===0&&e(h)?(u(),f("div",Ue,[g(l.$slots,"pending",w(B({query:e(i),filteredItems:e(p),pending:e(h),items:e(m)})),()=>[$("span",Ze,q(e(A).pending),1)])])):e(p).length===0&&!l.allowCreate?(u(),f("div",Je,[g(l.$slots,"empty",w(B({query:e(i),filteredItems:e(p),pending:e(h),items:e(m)})),()=>[$("span",Oe,q(e(A).empty),1)])])):(u(),f(W,{key:2},["start-item"in l.$slots?(u(),f("div",We,[g(l.$slots,"start-item",w(B({query:e(i),filteredItems:e(p),pending:e(h),items:e(m)})))])):y("",!0),l.allowCreate&&e(X)?(u(),k(e(se),{key:1,value:e(X),class:b(l.hideCreatePrompt?"hidden":"nui-autocomplete-results-item"),as:"div"},{default:v(({active:n,selected:F})=>[g(l.$slots,"create-item",w(B({query:e(i),filteredItems:e(p),pending:e(h),items:e(m),active:n,selected:F})),()=>[c(G,{rounded:e(V),item:{label:`Create '${e(i)}'`,value:e(i)},active:n,selected:F},null,8,["rounded","item","active","selected"])])]),_:3},8,["value","class"])):y("",!0),(u(!0),f(W,null,oe(e(p),n=>(u(),k(e(se),{key:ce(n),class:"nui-autocomplete-results-item",as:"div",value:e(I).prop&&t.properties?.value?n[t.properties.value]:n},{default:v(({active:F,selected:Q})=>[g(l.$slots,"item",w(B({query:e(i),filteredItems:e(p),pending:e(h),items:e(m),item:n,active:F,selected:Q})),()=>[c(G,{rounded:e(V),item:l.properties?n:{label:e(z)(n)},active:F,selected:Q,properties:l.properties},null,8,["rounded","item","active","selected","properties"])])]),_:2},1032,["value"]))),128)),"end-item"in l.$slots?(u(),f("div",Xe,[g(l.$slots,"end-item",w(B({query:e(i),filteredItems:e(p),pending:e(h),items:e(m)})))])):y("",!0)],64))]),_:3},8,["class"])]),_:3},8,["class"])]),_:3},8,["flip","strategy","placement","adaptive-width"])]),_:3},8,["modelValue","by","multiple","disabled","class"])}}});export{lt as _,He as a};
