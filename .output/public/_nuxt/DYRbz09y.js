import{_ as O}from"./BEFkdUEj.js";import{d as q,F as G,ad as Q,P as U,z as b,Q as B,r as I,c as i,O as C,w as o,i as r,e as u,f as e,g as t,h,C as m,U as g,S as T,R as P,bE as X,m as Z,l as J,_ as K,bZ as W,E as Y}from"./IEdULTv5.js";import{_ as R}from"./Dk2oKIvi.js";import{_ as ee}from"./WE4RFoln.js";import{_ as te}from"./FbW_Bucn.js";import{u as se}from"./B4EpaqOd.js";import{C as ae,D as oe}from"./D559Dica.js";/* empty css        */const ne={key:0,class:"flex h-12 items-center justify-between pe-4 xl:pe-10"},ie={class:"flex items-center gap-2"},re={class:"flex items-center gap-2"},le={class:"flex h-[calc(100vh_-_133px)] grow space-x-6 space-x-reverse overflow-auto pt-2"},ce={class:"flex h-14 shrink-0 items-center px-2"},de={class:"block font-sans text-sm font-semibold"},ue={class:"text-primary-500 dark:text-sunny ms-2 flex size-5 items-center justify-center text-sm font-semibold"},me={class:"text-primary-500 dark:text-sunny hover:bg-primary-500/20 dark:hover:bg-sunny/20 ms-auto flex size-6 items-center justify-center rounded-full transition-colors duration-300"},_e={class:"nui-slimscroll overflow-auto pb-10 pe-2"},pe=["onClick"],fe={class:"relative mb-2"},he={class:"mb-2 flex w-full items-center justify-between gap-2"},xe={class:"text-muted-500 dark:text-muted-200 mt-2 flex w-full items-center justify-between text-xs font-medium"},ge={class:"flex items-center gap-2"},ve={class:"text-muted-400 flex items-center gap-3"},be=["data-nui-tooltip"],ke=["data-nui-tooltip"],ye=["data-nui-tooltip"],we={key:1},ze={class:"text-muted-400 mt-10 flex items-center justify-center"},je={class:"mt-2 text-center"},$e=e("span",null,"چیزی برای نمایش نیست",-1),Be=e("span",null,"در حال حاضر هیچ کار در انتظاری برای نمایش وجود ندارد.",-1),Ie={class:"text-primary-500 dark:text-sunny mx-auto mt-2 flex items-center justify-center gap-1 font-sans text-xs underline-offset-4 hover:underline"},Ce=e("span",null,"وظیفه جدید",-1),Te={class:"flex w-72 shrink-0 flex-col"},Pe=e("div",{class:"flex h-14 shrink-0 items-center px-2"},[e("span",{class:"block font-sans text-sm font-semibold"},"سفارشی‌سازی")],-1),De={class:"w-full"},Ne={class:"text-muted-500 dark:text-muted-400 hover:text-primary-500 dark:hover:text-sunny border-muted-300 dark:border-muted-600 hover:border-primary-500 dark:hover:border-sunny flex h-12 w-full items-center justify-center gap-x-2 rounded-xl border-2 border-dashed px-6 font-sans transition-colors duration-300 hover:border-solid"},Ae=e("span",{class:"text-sm"},"مدیریت ستون‌ها",-1),Ve=e("div",{class:"w-6 shrink-0"},null,-1),Ze=q({__name:"[slug]",async setup(Ee){let f,x;const _=G({new:{title:"جدید",tasks:[]},inProgress:{title:"در حال تکمیل",tasks:[]},blocked:{title:"مسدود شده",tasks:[]},onHold:{title:"نگه داشته شده",tasks:[]},inReview:{title:"درحال بررسی",tasks:[]},done:{title:"انجام شده",tasks:[]}}),{open:D,close:N}=Q(),A=U(),k=b(()=>A.params.slug),V=b(()=>({slug:k.value})),{data:d,pending:Fe,error:He,refresh:Se}=([f,x]=B(()=>se("/api/company/projects",{query:V},"$PXR3v4Bgc6")),f=await f,x(),f);d.value?.project||([f,x]=B(()=>X("/layouts/projects")),await f,x());const y=I(d.value?.project?.tasks);if(y.value)for(const a of y.value)switch(a.status){case 0:_.new.tasks.push(a);break;case 1:_.inProgress.tasks.push(a);break;case 2:_.blocked.tasks.push(a);break;case 3:_.onHold.tasks.push(a);break;case 4:_.inReview.tasks.push(a);break;case 5:_.done.tasks.push(a);break}const E=b(()=>Object.values(_||{})),w=I();function F(a,n){w.value=n.find(l=>l.id===a),D("task",{task:w,onMessage:async l=>{console.log("onMessage"),console.log(l),N()}})}function H(a,n){if(typeof n?.addedIndex!="number"||typeof n?.removedIndex!="number"||n.addedIndex===n.removedIndex)return;let l;n.removedIndex!==null&&(l=a.tasks.splice(n.removedIndex,1)[0]),n.addedIndex!==null&&a.tasks.splice(n.addedIndex,0,l)}return(a,n)=>{const l=O,z=Z,v=J,S=R,c=K,j=ee,L=te,$=Y,M=W;return i(),C(M,{"horizontal-scroll":"",class:"bg-muted-100 dark:bg-muted-900 h-screen w-full"},{default:o(()=>[r(d)?.project!==void 0?(i(),u("div",ne,[e("div",ie,[t(l,{src:r(d)?.project.customer.logo,size:"xs"},null,8,["src"]),e("div",null,[t(z,{size:"xs",class:"text-muted-400"},{default:o(()=>[h(m(r(d)?.project.customer.name),1)]),_:1}),t(v,{as:"h2",size:"sm",weight:"medium"},{default:o(()=>[h(m(r(d)?.project.name),1)]),_:1})])]),e("div",re,[t(S,{avatars:r(d)?.project.team,size:"xs"},null,8,["avatars"]),t(j,{to:`/layouts/projects/details/${r(k)}`,rounded:"lg","data-nui-tooltip":"جزئیات پروژه"},{default:o(()=>[t(c,{name:"lucide:layout-template",class:"size-4"})]),_:1},8,["to"]),t(j,{rounded:"full","data-nui-tooltip":"تسک جدید"},{default:o(()=>[t(c,{name:"lucide:plus",class:"size-4"})]),_:1})])])):g("",!0),e("div",le,[(i(!0),u(P,null,T(r(E),p=>(i(),u("div",{key:p.title,class:"flex h-full w-72 shrink-0 flex-col"},[e("div",ce,[e("span",de,m(p.title),1),e("span",ue,m(p.tasks.length),1),e("button",me,[t(c,{name:"lucide:plus",class:"size-4"})])]),e("div",_e,[t(r(ae),{tag:"div",class:"flex flex-col gap-y-4",orientation:"vertical","group-name":p.title,"drag-class":"transform rotate-2 transform-gpu","drop-class":"opacity-40","drop-placeholder":{className:"mt-4 border-muted-200 border-dashed dark:border-muted-700 dark:bg-muted-800 group relative flex cursor-pointer flex-col items-start rounded-lg border bg-white/90 p-4 hover:bg-white opacity-60 mb-4"},onDrop:s=>H(p,s)},{default:o(()=>[p.tasks.length>0?(i(!0),u(P,{key:0},T(p.tasks,s=>(i(),C(r(oe),{key:s.id},{default:o(()=>[e("div",{role:"button",tabindex:"0",class:"border-muted-200 dark:border-muted-700 dark:bg-muted-800 group relative flex cursor-pointer flex-col items-start rounded-lg border bg-white/90 p-4 hover:bg-white dark:hover:bg-muted-700/90",draggable:"true",onClick:()=>F(s.id,r(d)?.project?.tasks)},[e("div",fe,[e("div",he,[t(L,{rounded:"full",variant:"pastel",color:"muted",class:"m-0 -ms-1 inline-flex h-6 scale-90 items-center py-0 text-xs font-semibold"},{default:o(()=>[h(" تسک #"+m(s.id),1)]),_:2},1024),t($,{size:"xs",class:"text-muted-400"},{default:o(()=>[h(m(s.created),1)]),_:2},1024)]),t(v,{as:"h4",size:"sm",weight:"medium",class:"line-clamp-2"},{default:o(()=>[e("span",null,m(s.name),1)]),_:2},1024)]),e("div",xe,[e("div",ge,[t(l,{src:s.assignee.src,size:"xxs",class:"shrink-0"},null,8,["src"]),t($,{size:"xs",class:"text-muted-400"},{default:o(()=>[h(m(s.assignee.tooltip),1)]),_:2},1024)]),e("div",ve,[s.checklist.length>0?(i(),u("div",{key:0,"data-nui-tooltip":`${s.checklist.length} subtask${s.checklist.length>1?"s":""} in checklist`,"data-nui-tooltip-position":"start"},[t(c,{name:"lucide:check-circle",class:"size-4"})],8,be)):g("",!0),s.files.length>0?(i(),u("div",{key:1,"data-nui-tooltip":`${s.files.length} file${s.files.length>1?"s":""} uploaded`,"data-nui-tooltip-position":"start"},[t(c,{name:"lucide:file",class:"size-4"})],8,ke)):g("",!0),s.comments.length>0?(i(),u("div",{key:2,"data-nui-tooltip":`${s.comments.length} comment${s.comments.length>1?"s":""}`,"data-nui-tooltip-position":"start"},[t(c,{name:"lucide:message-circle",class:"size-4"})],8,ye)):g("",!0)])])],8,pe)]),_:2},1024))),128)):(i(),u("div",we,[e("div",ze,[t(c,{name:"ph:kanban-thin",class:"size-12"})]),e("div",je,[t(v,{as:"h4",size:"md",weight:"light",class:"mb-1"},{default:o(()=>[$e]),_:1}),t(z,{size:"xs",lead:"tight",class:"text-muted-500 dark:text-muted-400 mx-auto max-w-[200px] !font-sans"},{default:o(()=>[Be]),_:1}),e("button",Ie,[t(c,{name:"lucide:plus",class:"size-3"}),Ce])])]))]),_:2},1032,["group-name","onDrop"])])]))),128)),e("div",Te,[Pe,e("div",De,[e("button",Ne,[t(c,{name:"ph:gear-six-duotone",class:"size-4"}),Ae])])]),Ve])]),_:1})}}});export{Ze as default};
