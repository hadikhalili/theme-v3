import{p as L,d as C,u as N,a as O,r as M,o as P,b as m,c as Q,e as W,f as e,g as s,w as r,h as _,i as t,j as q,_ as G,k as H,l as X,m as J,n as K,q as Y}from"./IEdULTv5.js";import{_ as Z}from"./BAQZlUep.js";import{_ as ee}from"./BuxtxGPb.js";import{z as f,u as te,F as x,t as se}from"./BrTA1Oo6.js";import{useTokenClient as oe}from"./6r13ZBGy.js";import{u as ae,a as ne}from"./Bdg8mEWQ.js";/* empty css        */import"./Czf9FVrn.js";import"./I-jT7mSR.js";const le=L("/img/illustrations/magician.svg"),re={class:"dark:bg-muted-800 flex min-h-screen bg-white"},ie={class:"relative flex flex-1 flex-col justify-center px-6 py-12 lg:w-2/5 lg:flex-none"},de={class:"dark:bg-muted-800 relative mx-auto w-full max-w-sm bg-white"},ce={class:"flex w-full items-center justify-between"},ue=e("button",{class:"btn btn-active btn-accent"},"Accent",-1),me=e("span",null,"بازگشت به خانه",-1),_e={class:"flex flex-wrap justify-between gap-4"},fe=["disabled"],pe=e("div",null,"با گوگل وارد شوید",-1),he=e("div",{class:"flex-100 mt-8 flex items-center"},[e("hr",{class:"border-muted-200 dark:border-muted-700 flex-auto border-t-2"}),e("span",{class:"text-muted-600 dark:text-muted-300 px-4 font-sans font-light"}," یا "),e("hr",{class:"border-muted-200 dark:border-muted-700 flex-auto border-t-2"})],-1),ge={class:"mt-5"},be={class:"space-y-4"},xe={class:"mt-6 flex items-center justify-between"},ve={class:"text-xs leading-5"},we={class:"mt-6"},ye={class:"block w-full rounded-md shadow-sm"},ke={class:"text-muted-400 mt-4 flex justify-between font-sans text-xs leading-5"},Ee=e("span",null,"حساب کاربری ندارید؟",-1),Be=e("div",{class:"bg-muted-100 dark:bg-muted-900 relative hidden w-0 flex-1 items-center justify-center lg:flex lg:w-3/5"},[e("div",{class:"mx-auto w-full max-w-4xl"},[e("img",{class:"mx-auto max-w-md",src:le,alt:"",width:"500",height:"500"})])],-1),Me=C({__name:"index",setup(Se){const p=ae(),h=N();O();const o=M(!1),v={EMAIL_REQUIRED:"یک ایمیل معتبر لازم است",PASSWORD_REQUIRED:"وارد کردن رمز عبور لازم است"},k=f.object({email:f.string().email(v.EMAIL_REQUIRED),password:f.string().min(1,v.PASSWORD_REQUIRED),trustDevice:f.boolean()}),E=se(k),B={email:"",password:"",trustDevice:!1},{handleSubmit:S,handleReset:Re,isSubmitting:d,setFieldError:R,meta:Ae,values:Ie,errors:Ue,resetForm:A,setFieldValue:Ve,setErrors:De}=te({validationSchema:E,initialValues:B});P(async()=>{await p.checkAuth()&&await h.push("/dashboards")});const w=S(async a=>{o.value=!0;try{await p.login(a.email,a.password),m.success({title:"ورود موفق",message:"ورود با موفقیت انجام شد"}),await h.push("/dashboards")}catch(n){console.error("Login error:",n),R("password","نام کاربری یا رمز عبور نامعتبر است"),m.error({title:"خطا در ورود",message:n.message||"ورود ناموفق بود"}),A()}finally{o.value=!1}}),I=async a=>{o.value=!0;const{customFetch:n}=ne();try{if(!a.access_token||typeof a.access_token!="string")throw new Error("No valid access token provided");const l=await n("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${a.access_token}`}});await p.googleLogin(l.sub,l.email,l.name),m.success({title:"ورود موفق",message:"ورود با گوگل با موفقیت انجام شد"}),h.push("/dashboards")}catch(l){console.error("Error handling Google Sign-In:",l),m.error({title:"خطا در ورود با گوگل",message:l.message||"ورود ناموفق بود"})}finally{o.value=!1}},U=a=>{console.log("Error: ",a),m.error({title:"خطا در ورود با گوگل",message:"ورود ناموفق بود"})},{isReady:V,login:D}=oe({onSuccess:I,onError:U});return(a,n)=>{const l=G,g=H,j=Z,T=X,F=J,y=K,$=ee,z=Y;return Q(),W("div",re,[e("div",ie,[e("div",de,[e("div",ce,[ue,s(g,{to:"/dashboards",class:"text-muted-400 hover:text-primary-500 flex items-center gap-2 font-sans font-medium transition-colors duration-300"},{default:r(()=>[s(l,{name:"gg:arrow-long-left",class:"size-5 rtl:rotate-180"}),me]),_:1}),s(j)]),e("div",null,[s(T,{as:"h2",size:"3xl",lead:"relaxed",weight:"medium",class:"mt-6"},{default:r(()=>[_(" خوش آمدید. ")]),_:1}),s(F,{size:"sm",class:"text-muted-400 mb-6"},{default:r(()=>[_(" با استفاده از حساب گوگل یا اطلاعات ورود خود وارد شوید. ")]),_:1}),e("div",_e,[e("button",{class:"dark:bg-muted-700 text-muted-800 border-muted-300 dark:border-muted-600 nui-focus relative inline-flex grow items-center justify-center gap-2 rounded border bg-white px-6 py-4 dark:text-white",disabled:!t(V)||t(o),onClick:n[0]||(n[0]=()=>t(D)())},[s(l,{name:"logos:google-icon",class:"size-5"}),pe],8,fe)]),he]),e("form",{method:"POST",action:"",class:"mt-6",novalidate:"",onSubmit:n[1]||(n[1]=q((...i)=>t(w)&&t(w)(...i),["prevent"]))},[e("div",ge,[e("div",null,[e("div",be,[s(t(x),{name:"email"},{default:r(({field:i,errorMessage:c,handleChange:u,handleBlur:b})=>[s(y,{"model-value":i.value,error:c,disabled:t(d)||t(o),type:"email",label:"آدرس ایمیل",placeholder:"آدرس ایمیل",autocomplete:"email",classes:{input:"h-12"},"onUpdate:modelValue":u,onBlur:b},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1}),s(t(x),{name:"password"},{default:r(({field:i,errorMessage:c,handleChange:u,handleBlur:b})=>[s(y,{"model-value":i.value,error:c,disabled:t(d)||t(o),type:"password",label:"رمز عبور",placeholder:"رمز عبور",autocomplete:"current-password",classes:{input:"h-12"},"onUpdate:modelValue":u,onBlur:b},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",xe,[s(t(x),{name:"trustDevice"},{default:r(({field:i,handleChange:c,handleBlur:u})=>[s($,{"model-value":i.value,disabled:t(d)||t(o),rounded:"sm",label:"اعتماد برای ۶۰ روز",color:"primary","onUpdate:modelValue":c,onBlur:u},null,8,["model-value","disabled","onUpdate:modelValue","onBlur"])]),_:1}),e("div",ve,[s(g,{to:"/auth/recover",class:"text-primary-600 hover:text-primary-500 font-sans font-medium underline-offset-4 transition duration-150 ease-in-out hover:underline"},{default:r(()=>[_(" رمز عبور خود را فراموش کرده‌اید؟ ")]),_:1})])]),e("div",we,[e("div",ye,[s(z,{disabled:t(d)||t(o),loading:t(d)||t(o),type:"submit",color:"primary",class:"!h-11 w-full"},{default:r(()=>[_(" ورود ")]),_:1},8,["disabled","loading"])])])]),e("p",ke,[Ee,s(g,{to:"/auth/signup-1",class:"text-primary-600 hover:text-primary-500 font-medium underline-offset-4 transition duration-150 ease-in-out hover:underline"},{default:r(()=>[_(" ثبت نام ")]),_:1})])])],32)])]),Be])}}});export{Me as default};
