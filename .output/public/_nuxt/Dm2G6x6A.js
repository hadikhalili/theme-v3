import je from"./IFkE8VMb.js";import{d as Te,ad as $e,P as Pe,B as Le,r as c,z as N,o as Re,y as Se,c as n,e as u,f as e,g as l,w as x,j as D,i as r,X as y,h as Z,W as ee,R as L,S as B,U as M,b as S,k as Ee,_ as Ie,V as Ue,n as Oe,q as Be,aj as Me,a7 as Ve,ai as Ae,C as j,O as V,a6 as Fe,E as qe}from"./IEdULTv5.js";import{_ as De}from"./C5D-PoO-.js";import{_ as He}from"./BEFkdUEj.js";import{u as W}from"./B4EpaqOd.js";import{u as Ne}from"./Bdg8mEWQ.js";/* empty css        */import"./DnbjhcHz.js";const We={class:"relative"},Ge={class:"bg-muted-100 dark:bg-muted-900 flex min-h-screen"},Xe={class:"border-muted-200 dark:border-muted-700 dark:bg-muted-800 relative z-10 hidden h-screen w-20 border-e bg-white sm:block"},Je={class:"flex h-full flex-col justify-between"},Ke={class:"flex flex-col"},Qe={class:"ltablet:w-full flex size-16 shrink-0 items-center justify-center lg:w-full"},Ye={class:"ltablet:w-full flex size-16 shrink-0 items-center justify-center lg:w-full"},Ze={class:"flex flex-col"},et={class:"flex h-16 w-full items-center justify-center"},tt={class:"flex h-16 w-full items-center justify-center"},st={class:"flex h-16 w-full items-center justify-center"},lt={class:"ltablet:border-e border-muted-200 dark:border-muted-700 dark:bg-muted-800 relative z-[9] h-screen w-28 bg-white sm:w-48 lg:border-e"},at={class:"flex h-full flex-col"},ot=["disabled"],it={class:"flex w-full items-center justify-between p-4 md:p-6"},rt=e("h3",{class:"font-heading text-muted-900 text-lg font-medium leading-6 dark:text-white"}," درخواست ایجاد مکالمه جدید ",-1),nt={class:"space-y-4 p-4 md:p-6"},ut=["value"],dt={class:"flex justify-end gap-x-2 p-4 md:p-6"},ct=["onClick"],mt=["disabled","onClick"],vt={class:"flex w-full flex-col"},ft={class:"flex h-16 w-full items-center justify-between px-4 sm:px-8"},pt={class:"flex w-80 items-center gap-2"},ht={class:"mt-12 space-y-12"},_t={class:"flex w-full max-w-md gap-4"},gt={class:"grow space-y-2"},xt={class:"flex w-full max-w-md gap-4"},yt={class:"grow space-y-2"},wt={class:"ms-auto flex w-full max-w-md flex-row-reverse justify-end gap-4"},bt={class:"grow space-y-2"},kt={class:"ms-auto flex w-full max-w-md flex-row-reverse justify-end gap-4"},zt={class:"grow space-y-2"},Ct={class:"flex w-full max-w-md gap-4"},jt={class:"grow space-y-2"},Tt={class:"flex w-full max-w-md gap-4"},$t={class:"grow space-y-2"},Pt={key:0,class:"space-y-12"},Lt={class:"shrink-0"},Rt={class:"flex max-w-md flex-col"},St={class:"font-sans text-sm"},Et={key:0,class:"mt-2 space-y-2"},It=["src","alt","onError"],Ut={class:"flex items-center gap-2"},Ot={class:"text-muted-800 dark:text-muted-100 font-sans text-sm"},Bt=["src","alt"],Mt={class:"px-1 py-2"},Vt={class:"text-muted-800 dark:text-muted-100 font-sans"},At={class:"text-muted-400 font-sans text-xs"},Ft={key:1},qt=e("div",{class:"absolute inset-0 flex items-center","aria-hidden":"true"},[e("div",{class:"border-muted-300/50 dark:border-muted-800 w-full border-t"})],-1),Dt={class:"relative flex justify-center"},Ht={class:"bg-muted-100 dark:bg-muted-900 text-muted-400 px-3 font-sans text-xs uppercase"},Nt={key:1,class:"relative flex w-full gap-4"},Wt={class:"shrink-0"},Gt={class:"flex max-w-md flex-col"},Xt={class:"bg-muted-200 dark:bg-muted-800 rounded-xl rounded-ss-none p-4"},Jt={class:"flex items-center gap-2"},Kt=e("p",{class:"font-sans text-sm"},"در حال دریافت پاسخ...",-1),Qt={class:"relative w-full"},Yt={class:"absolute end-2 top-0 flex h-10 items-center gap-1"},Zt=["disabled"],es=["disabled"],ts=["disabled"],ss={key:0,class:"bg-muted-100 dark:bg-muted-900 flex flex-wrap gap-2 px-4 pb-4 sm:px-8"},ls=["src"],as=["onClick"],os={class:"text-sm"},is=["onClick"],hs=Te({__name:"messaging",setup(rs){const{open:ne}=$e(),te=Pe(),se=Le(),w=c(te.query.llm||""),ue=Ne(),R=N(()=>ue.user?.id||0);let G=null;const de=()=>{G||(S.error({title:"نیاز به ورود",message:"برای ادامه استفاده از پیام‌رسان باید وارد حساب کاربری خود شوید."}),G=setTimeout(()=>{se.push("/auth"),G=null},3e3))},E=()=>R.value?!0:(de(),!1),H=c([{id:1,title:"بدون عنوان",provider:null,user:{name:"کاربر ناشناس",profilePicture:"/img/avatars/default-other.jpg"},messages:[{type:"received",text:"پیامی وجود ندارد",time:"هم اکنون",attachments:[]}]}]),f=c([...H.value]),_=c(),ce=c(!0),A=c(!1),k=c(""),z=c(!1),X=c(!1),T=c(1),b=c([]),le=c(null),g=c([]),$=c(!1),I=[{value:"gpt-3.5-turbo",label:"OpenAI GPT-3.5 Turbo"},{value:"gpt-4o-mini",label:"OpenAI GPT-4o Mini"},{value:"claude-3-sonnet",label:"Anthropic Claude 3 Sonnet"}],F=c(!1),P=c("درخواست ایجاد مکالمه جدید"),U=c(I[0].value),O=c(null),me=()=>{if(!E())return;$.value=!1,P.value="درخواست ایجاد مکالمه جدید";const t=I.some(s=>s.value===w.value);U.value=t?w.value:I[0].value,F.value=!0},J=()=>{F.value=!1,$.value=!1,P.value="درخواست ایجاد مکالمه جدید",U.value=I[0].value},ve=t=>t.title||"بدون عنوان",ae=N(()=>f.value.find(t=>t.id===T.value)||H.value[0]),fe=N(()=>I.reduce((t,s)=>(t[s.value]=s.label,t),{})),oe=t=>t?fe.value[t]??t:null,pe=N(()=>{const t=oe(ae.value.provider);return t||((w.value?oe(w.value):null)??"نامشخص")});Re(async()=>{console.log("onMounted triggered"),await K(),await K(),w.value&&await he(w.value),setTimeout(()=>{_.value&&_.value.scrollTo({top:_.value.scrollHeight,behavior:"smooth"})},300)});const K=async()=>{if(!E())return;const t={userId:R.value.toString()};w.value&&(t.provider=w.value);const{data:s,error:o}=await W("/api/chat/conversations",{query:t,immediate:!0},"$faDMRut1wG");Se(()=>{o.value?(console.error("خطا در دریافت مکالمات:",o.value),f.value=H.value,S.error({title:"خطا رخ داد",message:o.value?.message||"دریافت مکالمات ناموفق بود"})):s.value&&(f.value=s.value,setTimeout(()=>{_.value&&_.value.scrollTo({top:_.value.scrollHeight,behavior:"smooth"})},300))})},he=async t=>{if(!E())return;const{data:s,error:o}=await W("/api/chat/create-or-load",{method:"POST",body:{userId:R.value,provider:t,title:`Chat with ${t}`}},"$LIbbnM7WCH");s.value?(w.value=t,T.value=s.value.id,await K()):o.value&&console.error("Error creating/loading chat:",o.value)},_e=async()=>{if(!($.value||z.value||!E())){$.value=!0;try{const t=P.value.trim()||"درخواست ایجاد مکالمه جدید",s=U.value,o=await $fetch("/api/chat/conversations",{method:"POST",body:{userId:R.value,title:t,provider:s}});o.provider=s||null;const v={userId:R.value.toString()};s&&(v.provider=s,w.value=s,se.replace({query:{...te.query,llm:s}}));const i=await $fetch("/api/chat/conversations",{query:v});if(i.length){const p=i.find(q=>q.id===o.id)??o,h=i.filter(q=>q.id!==o.id);f.value=[p,...h]}else f.value=[o];F.value=!1,P.value="درخواست ایجاد مکالمه جدید",Q(o.id)}catch(t){console.error("خطا در ایجاد مکالمه:",t),S.error({title:"خطا در ایجاد مکالمه",message:t?.data?.statusMessage||t?.message||"ایجاد مکالمه جدید با مشکل مواجه شد"})}finally{$.value=!1}}},ge=async t=>{if(!(O.value!==null||!E())){O.value=t;try{await $fetch(`/api/chat/conversations/${t}`,{method:"DELETE",body:{userId:R.value}});const s=T.value===t;f.value=f.value.filter(o=>o.id!==t),f.value.length?s&&Q(f.value[0].id):(f.value=[...H.value],T.value=f.value[0].id,k.value="",b.value=[],g.value.forEach(o=>URL.revokeObjectURL(o)),g.value=[])}catch(s){console.error("حذف مکالمه با خطا مواجه شد:",s),S.error({title:"حذف مکالمه ناموفق بود",message:s?.data?.statusMessage||s?.message||"امکان حذف مکالمه وجود ندارد"})}finally{O.value=null}}};function Q(t){if(z.value)return;A.value=!0,k.value="",b.value=[],g.value.forEach(o=>URL.revokeObjectURL(o)),g.value=[];const s=f.value.find(o=>o.id===t);s?.provider&&(w.value=s.provider),T.value=t,setTimeout(()=>{A.value=!1,setTimeout(()=>{_.value&&_.value.scrollTo({top:_.value.scrollHeight,behavior:"smooth"})},300)},1e3)}const xe=async t=>{const s=t.target;if(!s.files||s.files.length===0)return;const o=Array.from(s.files),v=10*1024*1024,i=["image/jpeg","image/png","image/gif","application/pdf"],p=o.filter(h=>i.includes(h.type)?h.size>v?(S.warning({title:"خطا در انتخاب فایل",message:`حجم فایل ${h.name} بیش از حد مجاز (10 مگابایت) است`}),!1):!0:(S.warning({title:"خطا در انتخاب فایل",message:`نوع فایل ${h.name} پشتیبانی نمی‌شود`}),!1));b.value=p,g.value=p.filter(h=>h.type.startsWith("image/")).map(h=>URL.createObjectURL(h))},ie=t=>{g.value[t]&&URL.revokeObjectURL(g.value[t]),b.value.splice(t,1),g.value.splice(t,1)},ye=async t=>{const s=[];for(const o of t){console.log(`Uploading file with type: ${o.type}`);const v=new FormData;v.append("file",o);const{data:i,error:p}=await W("/api/chat/upload",{method:"POST",body:v},"$N5MHeIjaIe");if(p.value)throw new Error(p.value.message||`آپلود فایل ${o.name} ناموفق بود`);i.value&&s.push({type:o.type.startsWith("image/")?"image":"file",url:i.value.url,image:o.type.startsWith("image/")?i.value.url:void 0,text:o.name,name:i.value.name})}return s};async function we(){if(!(!k.value.trim()&&b.value.length===0)&&!(z.value||!E())){z.value=!0;try{const t=b.value.length?await ye(b.value):[],s={type:"sent",text:k.value.trim()||"پیوست",time:new Date().toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"}),attachments:t};X.value=!0;const{data:o,error:v}=await W("/api/chat/message",{method:"POST",body:{userId:R.value,conversationId:T.value,message:s,attachments:t.map(i=>({url:i.url,name:i.name,type:i.type}))}},"$a71rPhjsbn");if(v.value)throw new Error(v.value.message||"ارسال پیام ناموفق بود");if(o.value){const i=f.value.findIndex(p=>p.id===T.value);if(i!==-1){const p=Array.isArray(o.value)?o.value:[o.value];f.value[i].messages.push(...p)}k.value="",b.value=[],g.value.forEach(p=>URL.revokeObjectURL(p)),g.value=[],await Fe(),_.value&&_.value.scrollTo({top:_.value.scrollHeight,behavior:"smooth"})}}catch(t){console.error("خطا در ارسال پیام:",t),S.error({title:"خطا در ارسال",message:t.message||"ارسال پیام یا فایل ناموفق بود"})}finally{X.value=!1,z.value=!1}}}return(t,s)=>{const o=je,v=Ee,i=Ie,p=Ue,h=Oe,q=De,re=Be,be=Me,ke=qe,ze=Ve,d=Ae,Y=He;return n(),u("div",We,[e("div",Ge,[e("div",Xe,[e("div",Je,[e("div",Ke,[e("div",Qe,[l(v,{to:"#",class:"flex items-center justify-center"},{default:x(()=>[l(o,{class:"text-primary-600 h-10"})]),_:1})]),e("div",Ye,[e("a",{href:"#",class:"text-muted-400 hover:text-primary-500 hover:bg-primary-500/20 flex size-12 items-center justify-center rounded-2xl transition-colors duration-300",title:"بازگشت",onClick:s[0]||(s[0]=D(a=>t.$router.back(),["prevent"]))},[l(i,{name:"lucide:arrow-left",class:"size-5 rtl:rotate-180"})])])]),e("div",Ze,[e("div",et,[e("button",{type:"button",class:"text-muted-400 hover:text-primary-500 hover:bg-primary-500/20 flex size-12 items-center justify-center rounded-2xl transition-colors duration-300",title:"جستجو",onClick:s[1]||(s[1]=a=>r(ne)("search"))},[l(i,{name:"ph:magnifying-glass-duotone",class:"size-5"})])]),e("div",tt,[l(v,{to:"#",class:"text-muted-400 hover:text-primary-500 hover:bg-primary-500/20 flex size-12 items-center justify-center rounded-2xl transition-colors duration-300",title:"تنظیمات"},{default:x(()=>[l(i,{name:"ph:gear-six-duotone",class:"size-5"})]),_:1})]),e("div",st,[l(v,{to:"/layouts/ertegha-2",class:"text-muted-400 hover:text-primary-500 hover:bg-primary-500/20 flex size-12 items-center justify-center rounded-2xl transition-colors duration-300",title:"ارتقا حساب"},{default:x(()=>[l(i,{name:"ph:rocket-launch-duotone",class:"size-5"})]),_:1})])])])]),e("div",lt,[e("div",at,[e("button",{type:"button",class:"flex size-16 shrink-0 items-center justify-center sm:w-36",disabled:r($)||r(F),onClick:D(me,["prevent"])},[e("span",{class:y(["bg-primary-500 mr-4 flex h-10 w-full items-center justify-center rounded-lg text-white",r($)?"opacity-60 cursor-not-allowed":""])},[l(i,{name:"lucide:plus",class:"size-4"})],2)],8,ot),l(be,{open:r(F),size:"sm",onClose:J},{header:x(()=>[e("div",it,[rt,l(p,{onClick:J})])]),footer:x(()=>[e("div",dt,[l(re,{color:"default",onClick:J},{default:x(()=>[Z(" انصراف ")]),_:1}),l(re,{color:"primary",variant:"solid",disabled:r($)||!r(P).trim(),onClick:_e},{default:x(()=>[Z(" ایجاد مکالمه ")]),_:1},8,["disabled"])])]),default:x(()=>[e("div",nt,[l(h,{modelValue:r(P),"onUpdate:modelValue":s[2]||(s[2]=a=>ee(P)?P.value=a:null),label:"عنوان",placeholder:"مکالمه جدید"},null,8,["modelValue"]),l(q,{modelValue:r(U),"onUpdate:modelValue":s[3]||(s[3]=a=>ee(U)?U.value=a:null),label:"مدل زبانی"},{default:x(()=>[(n(),u(L,null,B(I,a=>e("option",{key:a.value,value:a.value},j(a.label),9,ut)),64))]),_:1},8,["modelValue"])])]),_:1},8,["open"]),(n(!0),u(L,null,B(r(f),a=>(n(),u("a",{key:a.id,href:"#",class:y(["group relative flex size-16 shrink-0 items-center justify-center border-s-2 pr-1 sm:w-full",r(T)===a.id?"border-primary-500 bg-primary-100":"border-transparent"]),onClick:D(C=>Q(a.id),["prevent"])},[e("button",{type:"button",class:y(["absolute -end-2 -top-2 size-6 items-center justify-center rounded-full bg-red-500 text-white transition duration-200",r(O)===a.id?"flex":"hidden group-hover:flex"]),disabled:r(O)===a.id,onClick:D(C=>ge(a.id),["stop","prevent"])},[r(O)!==a.id?(n(),V(i,{key:0,name:"lucide:x",class:"size-3"})):(n(),V(i,{key:1,name:"lucide:loader-2",class:"size-3 animate-spin"}))],10,mt),l(ke,{size:"xs",class:"text-muted-500 dark:text-muted-400 max-w-xs"},{default:x(()=>[Z(j(ve(a)),1)]),_:2},1024)],10,ct))),128))])]),e("div",{class:y(["relative w-full transition-all duration-300",r(ce)?"ltablet:max-w-[calc(100%_-_160px)] lg:max-w-[calc(100%_-_160px)]":"ltablet:max-w-[calc(100%_-_470px)] lg:max-w-[calc(100%_-_550px)]"])},[e("div",vt,[e("div",ft,[e("div",pt,[l(h,{class:"w-auto","model-value":r(pe),label:"نوع مدل زبانی:",rounded:"lg",disabled:""},null,8,["model-value"])]),l(ze,{class:"relative -end-4 z-20 flex h-16 w-[90%] scale-90 items-center justify-end gap-2 sm:end-0 sm:scale-100"})]),e("div",{ref_key:"chatEl",ref:_,class:y(["relative h-[calc(100vh_-_128px)] w-full p-4 sm:p-8",r(A)?"overflow-hidden":"overflow-y-auto nui-slimscroll"])},[e("div",{class:y(["bg-muted-100 dark:bg-muted-900 pointer-events-none absolute inset-0 z-10 size-full p-8 transition-opacity duration-300",r(A)?"opacity-100":"opacity-0 pointer-events-none"])},[e("div",ht,[e("div",_t,[l(d,{class:"size-8 shrink-0 rounded-full",width:32,height:32}),e("div",gt,[l(d,{class:"h-3 w-full max-w-56 rounded"}),l(d,{class:"h-3 w-full max-w-32 rounded"})])]),e("div",xt,[l(d,{class:"size-8 shrink-0 rounded-full",width:32,height:32}),e("div",yt,[l(d,{class:"h-3 w-full max-w-64 rounded"}),l(d,{class:"h-3 w-full max-w-48 rounded"})])]),e("div",wt,[l(d,{class:"size-8 shrink-0 rounded-full",width:32,height:32}),e("div",bt,[l(d,{class:"ms-auto h-3 w-full max-w-64 rounded"}),l(d,{class:"ms-auto h-3 w-full max-w-48 rounded"})])]),e("div",kt,[l(d,{class:"size-8 shrink-0 rounded-full",width:32,height:32}),e("div",zt,[l(d,{class:"ms-auto h-3 w-full max-w-56 rounded"}),l(d,{class:"ms-auto h-3 w-full max-w-32 rounded"})])]),e("div",Ct,[l(d,{class:"size-8 shrink-0 rounded-full",width:32,height:32}),e("div",jt,[l(d,{class:"h-3 w-full max-w-56 rounded"}),l(d,{class:"h-3 w-full max-w-32 rounded"})])]),e("div",Tt,[l(d,{class:"size-8 shrink-0 rounded-full",width:32,height:32}),e("div",$t,[l(d,{class:"h-3 w-full max-w-64 rounded"}),l(d,{class:"h-3 w-full max-w-48 rounded"})])])])],2),r(A)?M("",!0):(n(),u("div",Pt,[(n(!0),u(L,null,B(r(ae)?.messages,(a,C)=>(n(),u("div",{key:C,class:y(["relative flex w-full gap-4",[a.type==="received"?"flex-row":"flex-row-reverse",a.type==="separator"?"justify-center":""]])},[a.type!=="separator"?(n(),u(L,{key:0},[e("div",Lt,[a.type==="received"?(n(),V(Y,{key:0,src:"/img/icons/logos/ai-logo.jpg",size:"xs"})):a.type==="sent"?(n(),V(Y,{key:1,src:"/img/avatars/2.svg",size:"xs"})):M("",!0)]),e("div",Rt,[e("div",{class:y(["bg-muted-200 dark:bg-muted-800 rounded-xl p-4",[a.type==="received"?"rounded-ss-none":"",a.type==="sent"?"rounded-se-none":""]])},[e("p",St,j(a.text),1)],2),e("div",{class:y(["text-muted-400 mt-1 font-sans text-xs",a.type==="received"?"text-right":""])},j(a.time),3),a.attachments?.length?(n(),u("div",Et,[(n(!0),u(L,null,B(a.attachments,(m,Ce)=>(n(),u(L,{key:Ce},[m.type==="image"?(n(),u("div",{key:0,class:y(["dark:bg-muted-800 max-w-xs rounded-2xl bg-white p-2",a.type==="sent"?"ms-auto":""])},[e("img",{src:m.url||m.image||"/img/placeholder.png",alt:m.text||"تصویر",class:"rounded-xl",onError:()=>m.url="/img/placeholder.png"},null,40,It)],2)):m.type==="file"?(n(),V(v,{key:1,to:m.url,class:y(["dark:bg-muted-800 block max-w-xs rounded-2xl bg-white p-2",a.type==="sent"?"ms-auto":""])},{default:x(()=>[e("div",Ut,[l(i,{name:"lucide:file",class:"size-5"}),e("p",Ot,j(m.name||m.text||"فایل"),1)])]),_:2},1032,["to","class"])):m.type==="link"?(n(),V(v,{key:2,to:m.url,class:y(["dark:bg-muted-800 block max-w-xs rounded-2xl bg-white p-2",a.type==="sent"?"ms-auto":""])},{default:x(()=>[e("img",{src:m.image||"/img/placeholder.png",alt:m.text||"لینک",class:"rounded-xl"},null,8,Bt),e("div",Mt,[e("p",Vt,j(m.url?.replace(/(^\w+:|^)\/\//,"")),1),e("p",At,j(m.text||"لینک"),1)])]),_:2},1032,["to","class"])):M("",!0)],64))),128))])):M("",!0)])],64)):(n(),u("div",Ft,[qt,e("div",Dt,[e("span",Ht,j(a.time),1)])]))],2))),128))])),r(X)?(n(),u("div",Nt,[e("div",Wt,[l(Y,{src:"/img/icons/logos/ai-logo.jpg",size:"xs"})]),e("div",Gt,[e("div",Xt,[e("div",Jt,[l(i,{name:"lucide:loader-2",class:"size-4 animate-spin"}),Kt])])])])):M("",!0)],2),e("form",{method:"POST",action:"",class:"bg-muted-100 dark:bg-muted-900 flex h-16 w-full items-center px-4 sm:px-8",onSubmit:D(we,["prevent"])},[e("div",Qt,[l(h,{modelValue:r(k),"onUpdate:modelValue":s[4]||(s[4]=a=>ee(k)?k.value=a:null),disabled:r(z),rounded:"full",classes:{input:"h-12 ps-6 pe-24"},placeholder:"نوشتن پیام..."},null,8,["modelValue","disabled"]),e("div",Yt,[e("button",{type:"button",class:"text-muted-400 hover:text-primary-500 flex h-12 w-10 items-center justify-center transition-colors duration-300",disabled:r(z),onClick:s[5]||(s[5]=a=>r(le)?.click())},[l(i,{name:"lucide:paperclip",class:"size-5"})],8,Zt),e("input",{ref_key:"fileInput",ref:le,type:"file",multiple:"",accept:"image/jpeg,image/png,image/gif,application/pdf",class:"hidden",onChange:xe},null,544),e("button",{type:"button",class:"text-muted-400 hover:text-primary-500 flex h-12 w-10 items-center justify-center transition-colors duration-300",disabled:r(z)},[l(i,{name:"lucide:smile",class:"size-5"})],8,es),e("button",{type:"submit",class:"text-muted-400 hover:text-primary-500 flex h-12 w-10 items-center justify-center transition-colors duration-300",disabled:r(z)||!r(k).trim()&&!r(b).length},[l(i,{name:"lucide:send",class:"size-5"})],8,ts)])])],32),r(g).length||r(b).length?(n(),u("div",ss,[(n(!0),u(L,null,B(r(g),(a,C)=>(n(),u("div",{key:C,class:"relative"},[e("img",{src:a,alt:"پیش‌نمایش",class:"size-16 rounded-lg object-cover"},null,8,ls),e("button",{type:"button",class:"absolute right-0 top-0 flex size-5 items-center justify-center rounded-full bg-red-500 text-white",onClick:m=>ie(C)},[l(i,{name:"lucide:x",class:"size-3"})],8,as)]))),128)),(n(!0),u(L,null,B(r(b).filter(a=>!a.type.startsWith("image/")),(a,C)=>(n(),u("div",{key:`file-${C}`,class:"dark:bg-muted-800 relative flex items-center rounded-lg bg-white px-2 py-1"},[l(i,{name:"lucide:file",class:"mr-2 size-5"}),e("span",os,j(a.name),1),e("button",{type:"button",class:"absolute right-0 top-0 flex size-5 items-center justify-center rounded-full bg-red-500 text-white",onClick:m=>ie(C)},[l(i,{name:"lucide:x",class:"size-3"})],8,is)]))),128))])):M("",!0)])],2)])])}}});export{hs as default};
