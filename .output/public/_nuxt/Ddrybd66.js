import{d as j,r as f,a8 as K,c as w,e as g,f as v,I as y,X as Z,i as m,a4 as B,O as N,g as k,w as E,U as _,T as S,bt as U,bu as V}from"./IEdULTv5.js";const I={class:"relative"},A=["src"],O=["src"],X=["src"],q=["src"],G=j({inheritAttrs:!1,__name:"TairoImageZoom",props:{src:{},srcDark:{},zoomSrc:{},zoomSrcDark:{}},setup(T){const a=T,o=f({top:0,left:0,width:0,height:0}),n=f(null),l=f(null),s=f(!1),h=f(!1);let u=0;const b=e=>{e.ctrlKey||(e.stopPropagation(),u+=e.deltaY,n.value&&(n.value.style.transform=`translateY(${-u}px)`),i())},x=()=>{if(!s.value||!l.value)return;const{top:e,left:t,width:r,height:d}=l.value.getBoundingClientRect();o.value={top:e,left:t,width:r,height:d}},L=e=>{e.key==="Escape"&&(e.stopPropagation(),i())};let z=0;const $=e=>{e.stopPropagation(),z=e.changedTouches[0].screenY},p=e=>{e.stopPropagation(),u=z-e.changedTouches[0].screenY,n.value&&(n.value.style.transform=`translateY(${-u}px)`),i()};function R(){s.value||(s.value=!0,h.value=!1,Y())}function i(){s.value&&(s.value=!1,h.value=!0,n.value&&(n.value.style.top=`${o.value.top}px`,n.value.style.left=`${o.value.left}px`,n.value.style.width=`${o.value.width}px`,n.value.style.height=`${o.value.height}px`,n.value.addEventListener("transitionend",c,{once:!0})))}function Y(){window.addEventListener("wheel",b,{passive:!0}),window.addEventListener("resize",x,{passive:!0}),window.addEventListener("touchstart",$,{passive:!0}),window.addEventListener("touchmove",p,{passive:!0}),window.addEventListener("touchend",p,{passive:!0}),document.addEventListener("keydown",L)}function c(){u=0,s.value=!1,h.value=!1,window.removeEventListener("wheel",b),window.removeEventListener("resize",x),window.removeEventListener("touchstart",$),window.removeEventListener("touchmove",p),window.removeEventListener("touchend",p),document.removeEventListener("keydown",L),n.value?.removeEventListener("transitionend",c)}function C(){if(!l.value||s.value)return;const{top:e,left:t,width:r,height:d}=l.value.getBoundingClientRect();o.value={top:e,left:t,width:r,height:d},R()}function D(e){e.style.top=`${o.value.top}px`,e.style.left=`${o.value.left}px`,e.style.width=`${o.value.width}px`,e.style.height=`${o.value.height}px`,e.style.willChange="top, left, width, height"}function P(e,t){setTimeout(()=>{e.style.top="3rem",e.style.left="3rem",e.style.width="calc(100vw - 6rem)",e.style.height="calc(100vh - 6rem)",t()},0)}return K(()=>{c()}),(e,t)=>(w(),g("div",I,[v("a",{ref_key:"buttonRef",ref:l,role:"button",class:Z(["block cursor-zoom-in",[m(s)?"outline-none":"nui-focus"]]),tabindex:"0",onClick:t[0]||(t[0]=()=>C()),onKeydown:t[1]||(t[1]=B(()=>C(),["enter"]))},[v("img",y({class:"block w-full transition-all duration-300 dark:hidden",src:a.src},e.$attrs),null,16,A),v("img",y({class:"hidden w-full transition-all duration-300 dark:block",src:a.srcDark||a.src},e.$attrs),null,16,O)],34),(w(),N(V,{to:"body"},[k(S,{"enter-active-class":"transition-all duration-300 ease-in-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-all duration-300 ease-in-out","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:E(()=>[m(s)?(w(),g("div",{key:0,role:"button",tabindex:"0",class:"dark:bg-muted-900 fixed inset-0 z-[9999] bg-white",onClick:i})):_("",!0)]),_:1}),k(S,{onBeforeEnter:t[3]||(t[3]=r=>D(r)),onEnter:t[4]||(t[4]=(r,d)=>P(r,d)),onLeaveCancelled:c,onEnterCancelled:c},{default:E(()=>[m(s)||m(h)?(w(),g("a",{key:0,ref_key:"modalRef",ref:n,role:"button",tabindex:"0",class:"fixed z-[99999] flex cursor-zoom-out select-none items-center justify-center transition-[height,width,top,left] duration-300",onClick:i,onKeydown:t[2]||(t[2]=B(()=>i(),["enter"]))},[k(m(U),{class:"flex size-full items-center justify-center"},{default:E(()=>[v("img",y({class:"nui-focus block max-h-full max-w-full object-contain dark:hidden",src:a.zoomSrc||a.src},e.$attrs,{tabindex:"0"}),null,16,X),v("img",y({class:"nui-focus hidden max-h-full max-w-full object-contain dark:block",src:a.zoomSrcDark||a.srcDark||a.zoomSrc||a.src},e.$attrs,{tabindex:"0"}),null,16,q)]),_:1})],544)):_("",!0)]),_:1})]))]))}});export{G as _};
